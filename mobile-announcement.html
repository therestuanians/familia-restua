<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="./favicon.png" type="image/png">
    <title>Family Hub</title>

    <!-- Google Fonts (Light Montserrat) -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
	
	<style>

    /* Body Reset */
        html, body .mobile{
            height: 100%;
            margin: 0;
            font-family: 'Montserrat', sans-serif; /* Use Montserrat font */
			color: #fff; 
        }

        /* Navbar styles */
        .navbar {
            display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0.5rem 1rem;
			background-color: #FFD726;
			box-shadow: 0 .5rem 1rem rgba(0, 0, 0, .1);
			margin: 20px 20px 2rem; /* Add space from the top, left, and right */
			border-radius: 25px;
        }

        .navbar-title {
            font-size: 0.9rem;
            color: #FFF;
            text-transform: uppercase;
        }

		.button-container {
			display: flex;
			gap: 10px; /* Space between buttons */
		}

		.exit-btn, .serve-btn {
			padding: 0.4rem 1.5rem;
			font-size: 1.2rem;
			background-color: #EB8E27;
			color: #fff;
			border: none;
			border-radius: 25px;
			cursor: pointer;
			text-decoration: none;
		}



        /* Parent Stack Container */
        .parent {
            display: block; /* Change to block for stacking */
            max-width: 1000px; /* Set max width */
            margin: 0 auto; /* Center align */
            height: calc(100vh - 20px); /* Full screen height minus padding */
            padding: 10px; /* Small gaps on edges of the screen */
            box-sizing: border-box; /* Include padding in height/width calculations */
        }
		
		.div1{
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: 10px;
			margin: 0 auto; /* Center align */
			background: #DAF7A6;  /* Soft color background */
			color: #333;  /* Text color for contrast */
			font-family: 'Montserrat', sans-serif;
			text-align: center;
		}
		
		h2 {
		  font-size: 1 em;
		  color: #1e3799;  /* Accent color for the title */
		  margin-bottom: 10px;
		}

		.quote {
		  font-style: italic;
		  font-size: 0.8em;
		  color: #6D6875;  /* Color for the quote text */
		  margin: 0;
		}
		
		/* Chat Box in div2 */
		.div3 {
			background-color: #F1F9EC;
			display: flex;
			flex-direction: column;
			justify-content: flex-start; /* Keep items aligned at the start */
			padding: 10px;
			margin-bottom: 10px; /* Space between boxes */
			max-height: 300px;
		}

		/* Chat Messages Container */
		.div3 .chat-messages {
			overflow-y: auto; /* Allow scrolling for the messages area */
			flex-grow: 1; /* Ensure it grows to fill available space */
			text-align: left; /* Ensure all text stays aligned to the left */
		}

		/* Individual Chat Message */
		.div3 .chat-message {
			display: flex;
			justify-content: space-between;
			align-items: flex-start; /* Align items at the top */
			margin-bottom: 5px;
			font-size: 0.7em;
			text-align: left; /* Align text left inside each message */
			color: #000;
		}

		/* Timestamp */
		.timestamp {
			font-size: 0.6em;
			margin-left: 10px;
			align-self: flex-end;
			color: #000; /* Corrected color to use a valid hex code */
		}
		
		/* Chat Input Styles */
		#nameInput, #messageText {
			width: calc(100% - 50px);
			padding: 2px;
			border: 2px solid #FFD726;
			border-radius: 8px;
			font-size: 0.7em;
			margin-bottom: 10px;
			transition: border-color 0.3s, box-shadow 0.3s;
			font-family: 'Montserrat', sans-serif; /* Use Montserrat font */
		}

		#nameInput:focus, #messageText:focus {
			border-color: #FFA500;
			box-shadow: 0 0 5px rgba(0, 86, 179, 0.5);
		}

		/* Send Button */
		#sendButton {
			padding: 0.5rem;
			font-size: 1rem;
			background-color: #EB8E27;
			color: #fff;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-family: 'Montserrat', sans-serif; /* Use Montserrat font */
		}
		
			/* News Pane */
        .div4 {
            background-color: #F5F5F7;
            padding: 10px;
            margin-bottom: 10px; /* Space between boxes */
			}
			
        /* YouTube Video Section */
        .div2 {
            background-color: #000000;
            padding: 5px;
            margin-bottom: 10px; /* Space between boxes */
			max-height: 200px;
        }
		
		.ninja {
			background-color: #EB8E27;
		}
		
		/* Marquee Styles */
		.marquee {
			background-color: #EB8E27;
			color: white;
			padding: 10px 0;
			overflow: hidden;
			white-space: nowrap;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
			position: relative;
		}

		/* Add space around and align marquee content to left start */
		.marquee-content {
			display: inline-block;
			animation: marquee 35s linear infinite;
			padding-left: 100%; /* Start off-screen to the right */
		}

		@keyframes marquee {
			0% { transform: translateX(0); }  /* Start from the right edge */
			100% { transform: translateX(-100%); }  /* Move to the left */
		}


        .read-btn {
            margin-top: 5px;
            padding: 5px 10px;
            font-size: 0.9rem;
            background-color: #EB8E27;
            color: #fff;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            text-decoration: none; /* Remove underline */
        }


        /* Responsive Design */
        @media (max-width: 768px) {
            .parent {
                padding: 5px; /* Adjust padding for smaller screens */
            }
            #nameInput, #messageText {
                width: calc(100% - 30px); /* Adjust width for mobile */
            }
        }

        @media (max-width: 480px) {
            #nameInput, #messageText {
                width: calc(100% - 20px); /* Adjust width for mobile */
            }
        }
		
		</style>
	
	<script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
            import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

            const firebaseConfig = {
                apiKey: "AIzaSyBW9I8ZpGQCYZH5n-us71Cfb_yunGMPCUs",
                authDomain: "live-chat-testing-95232.firebaseapp.com",
                projectId: "live-chat-testing-95232",
                storageBucket: "live-chat-testing-95232.appspot.com",
                messagingSenderId: "982255648611",
                appId: "1:982255648611:web:da1255ce3152061e8a1d56"
            };

            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            // List of bad words to censor
            const badWords = ['fuck', 'shit', 'cum']; // Replace with actual bad words

            // Function to censor bad words
            const censorBadWords = (message) => {
                const regex = new RegExp(`\\b(${badWords.join('|')})\\b`, 'gi');
                return message.replace(regex, (matched) => '*'.repeat(matched.length));
            };

            const sendMessage = async () => {
                const nameInput = document.getElementById('nameInput');
                const messageInput = document.getElementById('messageText');

                const senderName = nameInput.value.trim();
                let messageText = messageInput.value.trim();

                if (senderName && messageText) {
                    // Censor the message text
                    messageText = censorBadWords(messageText);

                    await addDoc(collection(db, 'messages'), {
                        senderName,
                        text: messageText,
                        timestamp: new Date()
                    });
                    messageInput.value = ''; // Clear input field after sending
                }
            };

            // Save the user's name to local storage
            const nameInput = document.getElementById('nameInput');
            nameInput.addEventListener('input', () => {
                localStorage.setItem('username', nameInput.value);
            });

            // Load the user's name from local storage when the page loads
            window.onload = () => {
                const savedName = localStorage.getItem('username');
                if (savedName) {
                    nameInput.value = savedName;
                }
            };

            const displayMessages = () => {
                const chatMessages = document.getElementById('chatMessages');
                const q = query(collection(db, 'messages'), orderBy('timestamp'));

                onSnapshot(q, (snapshot) => {
                    chatMessages.innerHTML = ''; // Clear previous messages
                    snapshot.forEach((doc) => {
                        const msg = doc.data();
                        const messageElement = document.createElement('div');
                        messageElement.classList.add('chat-message');
                        messageElement.innerHTML = `<span>${msg.senderName}: ${msg.text}</span>
                                                    <span class="timestamp">${new Date(msg.timestamp.seconds * 1000).toLocaleTimeString()}</span>`;
                        chatMessages.appendChild(messageElement);
                    });
                    chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to latest message
                });
            };

            document.getElementById('sendButton').addEventListener('click', sendMessage);
            displayMessages();
        </script>
		
</head>
<body>
    <div class="mobile">
        <nav class="navbar">
            <div class="navbar-title">Family Hub</div>
			<div class="button-container">
				<button class="serve-btn" onclick="window.location.href='mobile-services.html'">↻</button>
				<button class="exit-btn" onclick="window.location.href='homepage.html'">×</button>
			</div>
        </nav>

        <div class="marquee">
            <div class="marquee-content">Undas 2024 and we need to clean grandpa's tomb &nbsp Welcome to the Announcements Section watch our livestream and keep active in our
			livechat now with services section where you can be updated to the weather and calendar as well as to our announcements</div>
        </div>

        <div class="parent">
			<div class="ninja">
			<script src="https://cdn.commoninja.com/sdk/latest/commonninja.js" defer></script>
			<div class="commonninja_component pid-c3419db8-2d5d-4a96-9d0d-d81eaf68920f"></div>
			</div>
			<br>
			<div class="div1">
				<h2>Daily Nugget</h2>
				<p id="nuggetBox" class="quote">"Your daily quote goes here!"</p>
				<script src="dailynugget.js"></script>
			</div>
			<br>
            <div class="div2">
                <!-- YouTube video embed -->
                <iframe 
                    width="100%" 
                    height="200" 
                    src="https://www.youtube.com/embed/GQH0jo7ju_Y?si=f47n29GilvG2yykw&autoplay=1&mute=1&loop=1&playlist=nGDe0O5Tdbk" 
                    frameborder="0" 
                    allow="autoplay; encrypted-media; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>
            <div class="div3">
                <div class="chat-messages" id="chatMessages"></div>
				<br>
                <input type="text" id="nameInput" placeholder="Your name" required maxlength="15">
                <input type="text" id="messageText" placeholder="Type a message (max 50 chars)" required maxlength="50">
                <button id="sendButton">Send</button>
            </div>
			<div class="div4">
				 <rssapp-list id="thGCT74oGsgs73bQ"></rssapp-list><script src="https://widget.rss.app/v1/list.js" type="text/javascript" async></script>
            </div>
            
        </div>
    </div>
</body>
</html>
